# 🌿 **FitTrack UA+** — офлайн-приложение для учёта здоровья

![FitTrack Logo](https://img.shields.io/badge/FitTrack-PWA-success?style=for-the-badge&logo=google-chrome&logoColor=white)
![Angular 18](https://img.shields.io/badge/Angular-18-red?style=for-the-badge&logo=angular)
![IndexedDB](https://img.shields.io/badge/IndexedDB-offline-blue?style=for-the-badge&logo=googlechrome)
![License](https://img.shields.io/badge/license-MIT-lightgrey?style=for-the-badge)

---

## 🧠 Описание проекта
**FitTrack UA+** — это прогрессивное веб-приложение (**PWA**) по принципу **Offline-First**. Оно продолжает работать даже без интернета, хранит данные локально с шифрованием и по желанию пользователя синхронизирует зашифрованные бэкапы с выбранным облачным сервисом.

**Базовые принципы:**
- 💾 Все операции (учёт воды, еды, витаминов, графики) выполняются в IndexedDB на устройстве.
- 🔐 Данные пользователя шифруются ключами, сгенерированными локально через WebCrypto.
- ☁️ При включении синхронизации приложение формирует `fittrack-data.json`, сравнивает хэши локальной и облачной копий и предлагает восстановление/обновление.

---

## ⚙️ Технологический стек

| Слой | Технологии |
|------|-------------|
| **Приложение** | Angular 18, TypeScript, Angular Material |
| **Хранилище** | IndexedDB (Dexie.js), WebCrypto (AES-GCM), Service Worker Cache |
| **Синхронизация** | Background Sync API, Cloud Connector SDKs (OneDrive, Google Drive, Dropbox, iCloud) |
| **Интеграции** | Web Share API, Notifications API |
| **DevOps** | GitHub Actions (линты + сборка PWA), static hosting (Firebase Hosting / Netlify / GitHub Pages) |

---

## 📱 Основной функционал

### 💧 Учёт воды
- Быстрое добавление объёмов (`+200/500/1000 мл`).
- Прогресс-бар и цели по гидратации.
- Напоминания даже в офлайне через Notification API и Service Worker.

### 🥗 Учёт питания
- Добавление блюд с калориями и БЖУ.
- Учёт витаминного состава в локальной базе.
- Автоподсчёт дневного итога и недельных агрегатов.

### 🌿 Баланс витаминов
- Хранение уровня витаминов и их рекомендации в IndexedDB.
- Локальные диаграммы и подсказки по продуктам.

### ⏰ Напоминания
- Локальные расписания без сервера.
- Push-уведомления из Service Worker.
- Сценарии «умных» напоминаний (вода, еда, витамины).

### 📊 Статистика
- Недельные графики по воде, калориям и витаминам.
- Локальный кэш агрегатов для мгновенной загрузки.

### ☁️ Облачная синхронизация (опционально)
- Включается из настроек.
- Создаёт зашифрованный `fittrack-data.json` + `fittrack-data.hash`.
- Загружает файл в OneDrive, Google Drive, Dropbox или iCloud.
- При входе сверяет хэши и предлагает «Восстановить из облака» или «Загрузить свежую копию».

---

## 📂 Документация проекта

| Файл | Назначение |
|------|-------------|
| [`/docs/architecture.md`](docs/architecture.md) | Архитектура Offline-First и поток синхронизации |
| [`/docs/api-spec.md`](docs/api-spec.md) | Формат бэкапа, шифрования и облачных коннекторов |
| [`/docs/data-model.md`](docs/data-model.md) | Схема IndexedDB и правила шифрования |
| [`/docs/roadmap.md`](docs/roadmap.md) | Дорожная карта релизов Offline-First |
| [`/docs/tasks.md`](docs/tasks.md) | Текущие задачи для приложения и синхронизации |
| [`/docs/ui-wireframes.md`](docs/ui-wireframes.md) | Описание экранов и офлайн UX-паттернов |

---

## 💻 Установка и запуск

### 1️⃣ Клонировать репозиторий
```bash
git clone https://github.com/yourname/fittrack.git
cd fittrack
```

### 2️⃣ Установить зависимости и запустить PWA
```bash
# Установить зависимости Angular-приложения
npm --prefix fittrack-ua install

# Запустить локальный дев-сервер (доступен на http://localhost:4200)
npm run start
```

### 3️⃣ Открыть приложение
```text
http://localhost:4200
```

### 4️⃣ Сборка PWA для продакшена
```bash
npm run build
```

Готовый бандл можно развернуть на любом статическом хостинге. Для поддержки офлайн-режима убедитесь, что корректно настроены HTTPS и Service Worker.

---

## 🔐 Как работает шифрование и синхронизация
1. При первом запуске создаётся мастер-ключ (AES-GCM 256) через WebCrypto.
2. Ключ сохраняется в `IndexedDB` и защищается паролем пользователя (PBKDF2 + salt).
3. Бэкап формируется как `fittrack-data.json`, внутри — все сущности (вода, еда, витамины, напоминания, настройки).
4. Файл шифруется, сохраняется локально и отправляется в выбранный облачный сервис.
5. При следующем запуске приложение сверяет `SHA-256` хэш локального и облачного файлов.
6. Если хэши отличаются, пользователь видит диалог: «Обновить облако» или «Восстановить локально».

---

## 🧭 Roadmap

| Версия | Цель | Статус |
|---------|------|--------|
| **v1.0.0** | Offline-First MVP: вода, еда, витамины, локальные напоминания | 🟢 В разработке |
| **v1.1.0** | Облачные коннекторы (OneDrive/Google Drive) + авто-бэкап | 🟡 Планируется |
| **v1.2.0** | Расширенная аналитика + умные рекомендации | 🕒 Планируется |
| **v2.0.0** | Wearable sync + мультиустройство | ⚪ Концепт |

---

## ☁️ Инфраструктура
- Статический хостинг PWA + HTTPS (например, Netlify, Firebase Hosting).
- GitHub Actions: линтеры, unit-тесты, сборка и выгрузка артефактов.
- Автоматическое версионирование бэкапа и ведение CHANGELOG (опционально).

---

## 📜 Лицензия
Проект распространяется под лицензией [MIT](LICENSE).
© 2025 FitTrack Team — Разработано в Украине 🇺🇦

---

> 💬 _«Track what matters. Stay balanced. Stay healthy.»_
