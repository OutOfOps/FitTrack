# üîå FitTrack UA+ ‚Äî API Specification v2

> **–í–µ—Ä—Å–∏—è:** 2.0  
> **–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-02-17  
> **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** ASP.NET 8 Minimal API ¬∑ Dapper ¬∑ PostgreSQL 16

## –û–±–∑–æ—Ä
–î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç REST API **FitTrack UA+** –≤–µ—Ä—Å–∏–∏ 2, –≤–∫–ª—é—á–∞—è –º–∞—Ä—à—Ä—É—Ç—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.
–í—Å–µ –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON –∏ —Ç—Ä–µ–±—É—é—Ç JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –∏–Ω–æ–µ.

---

## –í–µ—Ä—Å–∏—è API
–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã UA+ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–µ—Ñ–∏–∫—Å `https://<host>/api/v1/` –∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç/–≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ UTF-8.

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞
–û—à–∏–±–∫–∏ —Å–µ—Ä–≤–∏—Å–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π, –ø—Ä–∏–≤–µ–¥—ë–Ω–Ω–æ–π –Ω–∏–∂–µ, –∏ HTTP-–∫–æ–¥–æ–º –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Å–∏—Ç—É–∞—Ü–∏–µ–π.

| –ü–æ–ª–µ        | –¢–∏–ø      | –û–ø–∏—Å–∞–Ω–∏–µ                                      |
|-------------|----------|-----------------------------------------------|
| `code`      | string   | –ú–∞—à–∏–Ω–æ—á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥ –æ—à–∏–±–∫–∏ (snake_case).       |
| `message`   | string   | –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.   |
| `details`   | object[] | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ).|

#### –ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏
```json
{
  "code": "validation_failed",
  "message": "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è",
  "details": [
    { "field": "amountMl", "issue": "–ó–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ –Ω—É–ª—è" }
  ]
}
```

---

## üåê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### `POST /api/v1/auth/login`
–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT-—Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞.

#### –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
```json
{
  "email": "user@example.com",
  "password": "Secret123!"
}
```

#### –û—Ç–≤–µ—Ç `200 OK`
```json
{
  "token": "jwt-token",
  "expiresInSeconds": 3600
}
```

#### –û—à–∏–±–∫–∏
| –ö–æ–¥ | –°—Ü–µ–Ω–∞—Ä–∏–π                | –û—Ç–≤–µ—Ç                                         |
|-----|-------------------------|-----------------------------------------------|
| 400 | –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—Ö–æ–¥–∞   | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ `validation_failed`.       |
| 401 | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω  | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ `invalid_credentials`.     |

---

## üçΩ –ü–∏—Ç–∞–Ω–∏–µ

### `GET /api/v1/food`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–∏—â–µ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                  |
|----------|--------------------|---------------------------|
| `date`   | string (YYYY-MM-DD)| –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –¥–∞—Ç—ã|

#### –û—Ç–≤–µ—Ç `200 OK`
```json
[
  {
    "id": 101,
    "userId": 1,
    "name": "–û–≤—Å—è–Ω–∫–∞ —Å –±–∞–Ω–∞–Ω–æ–º",
    "calories": 240,
    "proteins": 6,
    "fats": 4,
    "carbs": 42,
    "vitamins": { "C": 12, "B6": 0.2 },
    "createdAt": "2025-10-29T07:00:00Z"
  }
]
```

### `POST /api/v1/food`
–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –ø–∏—â–µ–≤—É—é –∑–∞–ø–∏—Å—å.

#### –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
```json
{
  "name": "–í–∞—Ä—ë–Ω–æ–µ —è–π—Ü–æ",
  "calories": 70,
  "proteins": 6,
  "fats": 5,
  "carbs": 0,
  "vitamins": { "A": 74, "D": 1.1 }
}
```

#### –û—Ç–≤–µ—Ç `201 Created`
```json
{
  "id": 102,
  "message": "–ó–∞–ø–∏—Å—å –æ –ø–∏—Ç–∞–Ω–∏–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞"
}
```

#### –û—à–∏–±–∫–∏
| –ö–æ–¥ | –°—Ü–µ–Ω–∞—Ä–∏–π                         | –û—Ç–≤–µ—Ç                                  |
|-----|----------------------------------|----------------------------------------|
| 400 | –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–æ–ª—è                | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ `validation_failed` |

### `DELETE /api/v1/food/{id}`
–£–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –æ –ø–∏—Ç–∞–Ω–∏–∏ –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É. –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç ‚Äî `204 No Content`.

#### –û—à–∏–±–∫–∏
| –ö–æ–¥ | –°—Ü–µ–Ω–∞—Ä–∏–π            | –û—Ç–≤–µ—Ç                              |
|-----|---------------------|------------------------------------|
| 404 | –ó–∞–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞   | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ `not_found`     |

---

## üíß –í–æ–¥–∞

### `GET /api/v1/water/today`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –≤–æ–¥—ã –∑–∞ —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É.

#### –û—Ç–≤–µ—Ç `200 OK`
```json
[
  { "id": 1, "amountMl": 250, "date": "2025-10-29" },
  { "id": 2, "amountMl": 300, "date": "2025-10-29" }
]
```

### `POST /api/v1/water/add`
–î–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏ –≤–æ–¥—ã.

#### –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
```json
{
  "amountMl": 300
}
```

#### –û—Ç–≤–µ—Ç `201 Created`
```json
{
  "id": 3,
  "message": "–í–æ–¥–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞"
}
```

#### –û—à–∏–±–∫–∏
| –ö–æ–¥ | –°—Ü–µ–Ω–∞—Ä–∏–π                    | –û—Ç–≤–µ—Ç                                  |
|-----|-----------------------------|----------------------------------------|
| 400 | –û–±—ä—ë–º –º–µ–Ω—å—à–µ –ª–∏–±–æ —Ä–∞–≤–µ–Ω 0   | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ `validation_failed` |

---

## üåø –í–∏—Ç–∞–º–∏–Ω—ã

### `GET /api/v1/vitamins/balance`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –¥–Ω–µ–≤–Ω–æ–π –±–∞–ª–∞–Ω—Å –≤–∏—Ç–∞–º–∏–Ω–æ–≤ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

#### –û—Ç–≤–µ—Ç `200 OK`
```json
{
  "A": { "value": 450, "recommended": 900, "unit": "¬µg" },
  "C": { "value": 65, "recommended": 90, "unit": "mg" },
  "D": { "value": 5, "recommended": 10, "unit": "¬µg" },
  "B12": { "value": 2.1, "recommended": 2.4, "unit": "¬µg" }
}
```

### `POST /api/v1/vitamins/recommendations`
–§–æ—Ä–º–∏—Ä—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º —Å —É—á—ë—Ç–æ–º –¥–µ—Ñ–∏—Ü–∏—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

#### –û—Ç–≤–µ—Ç `200 OK`
```json
{
  "recommendations": [
    { "vitamin": "D", "foods": ["–õ–æ—Å–æ—Å—å", "–Ø–∏—á–Ω—ã–π –∂–µ–ª—Ç–æ–∫", "–°–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ"] },
    { "vitamin": "C", "foods": ["–ê–ø–µ–ª—å—Å–∏–Ω", "–ë–æ–ª–≥–∞—Ä—Å–∫–∏–π –ø–µ—Ä–µ—Ü", "–ë—Ä–æ–∫–∫–æ–ª–∏"] }
  ]
}
```

#### –û—à–∏–±–∫–∏
| –ö–æ–¥ | –°—Ü–µ–Ω–∞—Ä–∏–π                      | –û—Ç–≤–µ—Ç                                         |
|-----|-------------------------------|-----------------------------------------------|
| 503 | –í–∏—Ç–∞–º–∏–Ω–Ω—ã–π –º–æ–¥—É–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω  | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ `service_unavailable`      |

---

## ‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

### `GET /api/v1/reminders`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

#### –û—Ç–≤–µ—Ç `200 OK`
```json
[
  {
    "id": 1,
    "type": "water",
    "time": "09:00",
    "intervalMinutes": 120,
    "enabled": true
  }
]
```

### `POST /api/v1/reminders`
–°–æ–∑–¥–∞—ë—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ.

#### –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
```json
{
  "type": "water",
  "time": "10:00",
  "intervalMinutes": 180,
  "enabled": true
}
```

#### –û—Ç–≤–µ—Ç `200 OK`
```json
{
  "id": 5,
  "message": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"
}
```

#### –û—à–∏–±–∫–∏
| –ö–æ–¥ | –°—Ü–µ–Ω–∞—Ä–∏–π                                           | –û—Ç–≤–µ—Ç                                        |
|-----|----------------------------------------------------|----------------------------------------------|
| 400 | –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–Ω—å—à–µ 15 –º–∏–Ω—É—Ç                           | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ `interval_too_short`      |
| 409 | –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞    | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ `reminder_conflict`       |

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### `GET /api/v1/stats/weekly`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–¥–µ–ª—å–Ω—ã–µ —Å–≤–æ–¥–∫–∏ –ø–æ –∫–∞–ª–æ—Ä–∏—è–º –∏ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏.

#### –û—Ç–≤–µ—Ç `200 OK`
```json
{
  "calories": [
    { "date": "2025-10-23", "total": 1950 },
    { "date": "2025-10-24", "total": 1820 }
  ],
  "water": [
    { "date": "2025-10-23", "total": 2400 },
    { "date": "2025-10-24", "total": 2100 }
  ]
}
```

---

## ‚öôÔ∏è –û–±—â–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è
- –í—Å–µ –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç HTTP 401 –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–ª–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–º —Ç–æ–∫–µ–Ω–µ.
- –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –æ—Ç–º–µ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ UTC (ISO 8601).

---

_FitTrack UA+ API v2 ¬∑ –û–±–Ω–æ–≤–ª–µ–Ω–æ 17 —Ñ–µ–≤—Ä–∞–ª—è 2025 –≥–æ–¥–∞_
